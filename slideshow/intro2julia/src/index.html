<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="/MathSeminar.jl/libs/katex/katex.min.css">
   
   <link rel="stylesheet" href="/MathSeminar.jl/libs/highlight/github.min.css">
   
  

  <link href="/MathSeminar.jl/css/franklin.css" rel="stylesheet">
  <link href="/MathSeminar.jl/css/vela.css" rel="stylesheet">
  <script src="/MathSeminar.jl/libs/vela/jquery.min.js"></script>
  <link rel="stylesheet" href="/MathSeminar.jl/css/theorem.css">
   <title>Intro2Julia</title>  
  <!-- PLOTLY -->
  

  <title>Franklin Example | Vela</title>
</head>
<body>
  <div class="main-nav" id="menu">
    <div class="flex-container">
      <span class="sidebar-brand">
        <h3 style='font-size: 25px'>MathSeminar.jl</h3>
      </span>
    </div> <!-- class="flex-container" -->

    <nav class="sidebar-nav">
      <ul class="metismenu"  id="metismenu" >
        <li><a href="/MathSeminar.jl/index.html">Home</a></li>
        <li><a href="" class="has-arrow">Slide Show</a>
          <ul>
            <li><a href="/MathSeminar.jl/slideshow/remark/build/">Introduction to Remark.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/franklin/build">Introduction to Franklin.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/dash/build">Introduction to Dash.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/binarybuilder/build">Introduction to BinaryBuilder.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/myworkflow/build">Introduction to MyWorkflow.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/repl/build">Do something great in your REPL</a>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Programming</a>
          <ul>
            <li><a href="/MathSeminar.jl/programming/clang">C</a></li>
            <li><a href="/MathSeminar.jl/programming/rust">Rust</a></li>
            <li><a href="/MathSeminar.jl/programming/benchmark_part1"> Julia benchmark Part1 </a></li>
            <li><a href="/MathSeminar.jl/programming/benchmark_part2"> Julia benchmark Part2 </a></li>
            <li><a href="/MathSeminar.jl/programming/literatejl">Literate.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/sympy">SymPy.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/franklin">Franklin.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/weave">Weave.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/theoremcounter">Theorem Counter</a></li>
            <li><a href="/MathSeminar.jl/programming/images">Images.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/rcall">RCall.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/asciinema">asciinema</a></li>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Gallery</a>
          <ul>
            <li><a href="/MathSeminar.jl/gallery/animation/">Plots.jl animation</a></li>
            <li><a href="/MathSeminar.jl/gallery/curve/">Plots.jl curve</a></li>
            <li><a href="/MathSeminar.jl/gallery/gr/">GR.jl</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs1/">PlotlyJS.jl Part1</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs2/">PlotlyJS.jl Part2</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs3/">PlotlyJS.jl Part3</a></li>
            <li><a href="/MathSeminar.jl/gallery/jsxgraph_js/">JSXGraph (JS)</a></li>
            <li><a href="/MathSeminar.jl/gallery/jsxgraph_jl/">JSXGraph (Julia)</a></li>
            <li><a href="/MathSeminar.jl/gallery/wglmakie/">WGLMakie.jl</a></li>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Topics in Mathematics</a>
          <ul>
            <li><a href="/MathSeminar.jl/mathematics/linearalgebra/chapter0">Linear Algebra</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/dice">Dice</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/Chisq">Chisq Distributions</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/Law_of_Large_Numbers">Law_of_Large_Numbers</a></li>
            <li><a href="/MathSeminar.jl/mathematics/visualizations/triangular_function_addition_theorem">Triangular function addition theorem</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div> <!-- main nav menu -->

  <main id="panel">
    <div class="toggle-button hamburger hamburger--spin">
      <div class="hamburger-box">
        <div class="hamburger-inner"></div>
      </div>
    </div>
    <h1 class="page title">Intro2Julia</h1>
    <hr>


<!-- Content appended here -->
<div class="franklin-content"><p>class: center, middle</p>
<h1 id="intro2julia"><a href="#intro2julia" class="header-anchor">Intro2Julia</a></h1>
<hr />
<h1 id="julia_とは"><a href="#julia_とは" class="header-anchor">Julia とは</a></h1>
<p>こんなことができる:</p>
<ul>
<li><p>Python や Ruby のように動的で書きやすい</p>
</li>
<li><p>LLVM の JIT コンパイル方式によって動作し C/C&#43;&#43;/Fortran のように高速に動作できる</p>
</li>
<li><p>数値計算だけでなく Web アプリも作れる汎用的であり</p>
</li>
</ul>
<p>さまざまなプログラミング言語の良いところを取り入れた <a href="https://julialang.org/blog/2012/02/why-we-created-julia/">欲張りな</a>言語</p>
<p>参考:</p>
<ul>
<li><p><a href="https://arxiv.org/pdf/1411.1607.pdf">Julia: A fresh approach to numerical computing</a></p>
</li>
<li><p><a href="https://julialang.org/blog/2012/02/why-we-created-julia/">Why We Created Julia</a></p>
<ul>
<li><p>Julia開発者らのブログと論文</p>
</li>
</ul>
</li>
<li><p><a href="https://www.geidai.ac.jp/~marui/julialang/why_we_created_julia/index.html">なぜ僕らはJuliaを作ったか</a></p>
<ul>
<li><p>有志による日本語訳</p>
</li>
</ul>
</li>
</ul>
<hr />
<h1 id="julia_の応用先"><a href="#julia_の応用先" class="header-anchor">Julia の応用先</a></h1>
<ul>
<li><p>この欲張りなプログラミング言語は数値計算を必要とする科学者に愛され</p>
</li>
</ul>
<p>MIT, Stanford, Berkeley, CMU をはじめとする 1500 の大学で Julia を使った講義が行われている.</p>
<ul>
<li><p>学術の分野ではもちろん商用利用でも使い始められている.</p>
</li>
</ul>
<p>参考: </p>
<ul>
<li><p>TECHBLITZ からの記事: <a href="https://techblitz.com/julia-computing/">Python並みに使いやすくC言語並みに早く。応用性抜群のプログラミング言語を支えるJulia Computing</a></p>
</li>
<li><p><a href="https://juliacomputing.com/case-studies/pfizer/">Pharmaceutical Development</a></p>
</li>
<li><p><a href="https://medium.com/@timtullydevnull/why-menlo-ventures-invested-in-julia-computing-e0e3633d85a5">Why Menlo Ventures Invested in Julia Computing</a></p>
</li>
</ul>
<hr />
<h1 id="書籍"><a href="#書籍" class="header-anchor">書籍</a></h1>
<p>紙媒体のもので手元にあるだけでも下記のものがある.</p>
<ul>
<li><p><a href="https://www.oreilly.co.jp/books/9784873118895/">Juliaプログラミングクックブック &#40;オライリー・ジャパン&#41;</a></p>
</li>
<li><p><a href="https://www.coronasha.co.jp/np/isbn/9784339029055/">1から始めるJuliaプログラミング &#40;コロナ社&#41;</a></p>
</li>
<li><p><a href="https://www.scc-kk.co.jp/scc-books/b-418.html">基礎から学ぶJulia &#40;エスシーシー&#41;</a></p>
</li>
<li><p><a href="https://www.amazon.co.jp/dp/&#37;E4&#37;B8&#37;AD&#37;E5&#37;B1&#37;B1-&#37;E8&#37;8C&#37;82-ebook">Julia量子プログラミング入門</a></p>
</li>
<li><p><a href="https://www.kspub.co.jp/book/detail/5259801.html">Juliaで作って学ぶベイズ統計学 &#40;講談社&#41;</a></p>
</li>
</ul>
<p>ちなみに</p>
<ul>
<li><p><a href="https://interface.cqpub.co.jp/magazine/202006/">科学計算とPythonの研究 &#40;CQ出版社&#41;</a> の特集にも解説がある.</p>
</li>
</ul>
<hr />
<h1 id="web上の入門記事"><a href="#web上の入門記事" class="header-anchor">Web上の入門記事</a></h1>
<ul>
<li><p><a href="https://akio-tomiya.github.io/julia_in_physics/">Julia in Physics 2021 Online</a></p>
</li>
<li><p><a href="https://julia.quantecon.org/intro.html">Quantitative Economics with Julia</a></p>
</li>
<li><p><a href="https://benlauwens.github.io/ThinkJulia.jl/latest/book.html">Think Julia: How to Think Like a Computer Scientist</a></p>
</li>
<li><p><a href="https://www.youtube.com/channel/UC9IuUwwE2xdjQUT_LMLONoA">The Julia Programming Language&#40;YouTube channle&#41;</a></p>
</li>
<li><p><a href="https://computationalthinking.mit.edu/Spring21/">Introduction to Computational Thinking</a></p>
</li>
<li><p><a href="https://juliadatascience.io/">Julia Data Science</a></p>
</li>
</ul>
<h1 id="オンラインコミュニケーション"><a href="#オンラインコミュニケーション" class="header-anchor">オンラインコミュニケーション</a></h1>
<ul>
<li><p><a href="https://twitter.com/hashtag/JuliaLang?src&#61;hashtag_click">#JuliaLang</a> <a href="https://twitter.com/hashtag/Julia&#37;E8&#37;A8&#37;80&#37;E8&#37;AA&#37;9E?src&#61;hashtag_click">#Julia言語</a> をつけて質問すれば誰か答えてくれる</p>
</li>
<li><p><a href="https://julialang.org/slack/">Slack</a></p>
</li>
<li><p><a href="https://discourse.julialang.org/">Discourse</a></p>
</li>
<li><p><a href="https://discourse.julialang.org/t/come-join-the-julia-zulip-chat/36070">Zulip</a></p>
</li>
</ul>
<hr />
<h1 id="個人的に好きなところ"><a href="#個人的に好きなところ" class="header-anchor">個人的に好きなところ</a></h1>
<ul>
<li><p>数学的な概念を表現しやすい</p>
<ul>
<li><p>Unicode 入力支援のおかげで論文や教科書に出てくる <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mo separator="true">,</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msup><mi>A</mi><mi>a</mi></msup><mo separator="true">,</mo><mi>π</mi><mo separator="true">,</mo><mo>⊗</mo></mrow><annotation encoding="application/x-tex">\beta, \hat{y}, x_1, A^a, \pi, \otimes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">⊗</span></span></span></span> をそっくりそのままかける.</p>
</li>
<li><p><code>julia&gt; β, ŷ, x₁, Aᵃ, π, ⊗</code></p>
</li>
<li><p>🍌 ももちろんできる. &#40;<code>\:banana:</code> の後で Tab を押す&#41;</p>
</li>
</ul>
</li>
<li><p>まともなシンタックスでベクトル・行列を使ったコードがかける.  </p>
</li>
<li><p>サイエンスにバックグラウンドがある人と交流ができる</p>
</li>
<li><p>Jupyter Notebook や Pluto.jl など対話的環境を作れる</p>
</li>
<li><p>可視化ライブラリがいっぱい</p>
</li>
<li><p>Python と Julia の相互運用ができる &#40;Python は Julia のライブラリ&#41;</p>
</li>
<li><p>頑張ったらラズパイでも動かせる.</p>
<ul>
<li><p>動的な側面を持っているのにも関わらず C ぐらいのスピードは出せる.</p>
</li>
</ul>
</li>
<li><p>REPL はとてもリッチ</p>
</li>
</ul>
<hr />
<h1 id="みんな気に入ってくるかもな側面"><a href="#みんな気に入ってくるかもな側面" class="header-anchor">みんな気に入ってくるかも？な側面</a></h1>
<ul>
<li><p>引数に型アノテーションをつけて意図しない型を持つ値を関数に渡させないようにできる.</p>
<ul>
<li><p>実行時にエラーを出す. &#40;Python とは格が違う&#41;</p>
</li>
<li><p>関数の引数に型アノテーションつければ高速になるはウソ&#40;つけなくてもよい&#41;</p>
<ul>
<li><p><a href="https://discourse.julialang.org/t/type-annotation-make-jit-compile-faster/31906">Type annotation make JIT compile faster?</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>プロジェクトのアクティベートで環境の分離</p>
</li>
<li><p>Julia だけ入れればライブラリの依存関係は環境構築は全て Julia 側でマネージしてくれる. </p>
<ul>
<li><p>追加で <code>apt-get ...</code> とか <code>brew ...</code> とかしなくても良いようになっている.</p>
</li>
</ul>
</li>
<li><p>パッケージの開発が容易</p>
<ul>
<li><p><a href="https://github.com/invenia/PkgTemplates.jl">PkgTemplates.jl</a> で実用的な雛形を作れる</p>
</li>
</ul>
</li>
<li><p>リッチなパッケージマネージャがついている</p>
</li>
<li><p>テスト，ドキュメント生成などの現代的な実務開発にも耐えうる機能が使える</p>
</li>
</ul>
<hr />
<p>class: center, middle</p>
<h1 id="can_we_use_julia_in_production"><a href="#can_we_use_julia_in_production" class="header-anchor">Can we use Julia in production ?</a></h1>
<p>–</p>
<p>Me &quot;I believe we can &#33;&#33;&#33;&quot;</p>
<p>–</p>
<p>Other people &quot;Really ???&quot;</p>
<p>–</p>
<p>Me &quot;I believe we can &#33;&#33;&#33;&quot;</p>
<p>–</p>
<p>Other people &quot;Really ???&quot;</p>
<p>–</p>
<p>Me &quot;Come on &#33;&#33;&#33; 😩 You&#39;re so mean&quot;</p>
<hr />
<h1 id="よく言われること"><a href="#よく言われること" class="header-anchor">よく言われること</a></h1>
<ul>
<li><p>なぜか周りで使っている人が少ない（なぜ？）</p>
<ul>
<li><p>乱立しているパッケージマネージャー，フォーマッタ，ライブラリのデプロイ，型アノテーションに苦しみながら Python を使っている人を見ると気の毒に思えて仕方がない.</p>
</li>
</ul>
</li>
<li><p>破壊的な変更やエラーがめっちゃ出る &#40;既に過去の話&#41;</p>
<ul>
<li><p>v0.6 の時代は確かにそうだった. ライブラリのインストールやサンプルコードすらままならない時はあった.</p>
</li>
<li><p>単に入門するのであれば LTS の v1.6 を使えば特に困らない. v1.x から言語仕様が固まったのでライブラリを作る側が頑張って安定させている.</p>
</li>
<li><p>ソースコードは公開されているので直してプルリクエストを送れば良い. 実現すればあなたはその分野でヒーローになれる.</p>
</li>
</ul>
</li>
<li><p>プレコンパイル/JITコンパイル のオーバヘッドが重い&#40;改良の余地はある&#41;</p>
<ul>
<li><p>1.6 までのアップデートでだいぶマシになった.</p>
</li>
<li><p>カスタム sysimage を作る</p>
</li>
<li><p>この機会に良いマシンを買うと経済を回すことができる.</p>
</li>
</ul>
</li>
</ul>
<hr />
<h1 id="よく言われること__2"><a href="#よく言われること__2" class="header-anchor">よく言われること</a></h1>
<ul>
<li><p>クラスがない・オプジェクト指向で書きたい</p>
<ul>
<li><p>&#40;多重継承&#41;継承を駆使できるほど人類は賢くない.</p>
</li>
<li><p>大抵の場合は構造体と multiple dispatch の仕組みを組み合わせることで実現ができる.</p>
<ul>
<li><p>一回気持ちをリセットして<a href="https://gist.github.com/terasakisatoshi/4a7d5339c6a3ca015a82fa03f390afb3">この解説</a> を5回読んでから批判し直すと良い.</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>名前空間の問題</p>
<ul>
<li><p><code>using XXX</code> によっていろんな識別子がロードされてしまう</p>
<ul>
<li><p><code>using XXX: a, b, c</code> のように書けば <code>a</code>, <code>b</code>, <code>c</code> だけを <code>XXX</code> からロードすることができる. Python での <code>from XXX import a, b, c</code> 相当.</p>
</li>
<li><p>特定の識別子がどのパッケージから来たかは <code>@which</code> マクロで大まかに判断ができる.</p>
</li>
</ul>
</li>
<li><p>module を使って名前空間を管理できるし 1 module 1 リポジトリぐらいの小規模で管理した方が気楽かもしれない.</p>
</li>
</ul>
</li>
</ul>
<hr />
<h1 id="よく言われること__3"><a href="#よく言われること__3" class="header-anchor">よく言われること</a></h1>
<ul>
<li><p>使っている仕事が見つからない</p>
<ul>
<li><p>既にあるソフトウェアを書き直すのは大変なので</p>
</li>
<li><p>新規開発案件にアンテナを伸ばしてチャンスを伺う</p>
</li>
<li><p>GitHubで自分で例をいっぱい作れば良い</p>
</li>
<li><p>パッケージとして公開する方法は思ったよりも簡単</p>
</li>
</ul>
</li>
<li><p>日本語の文献が少ない</p>
<ul>
<li><p>英語を読めばいいじゃない&#40;一方で，日本語の解説は増えてきている&#41;</p>
</li>
<li><p>日本語で会話したい時は Twitter/Slack/Discord/Connpass で勉強会や雑談会がある</p>
</li>
<li><p>公式ドキュメントに基づいた解説があると喜ぶ人多そう</p>
</li>
<li><p>単に使ってみたで終わるものではなく, その記事を読みそこから得た知識から応用できる余地を見出せると良い記事が書ける.</p>
</li>
</ul>
</li>
</ul>
<hr />
<h1 id="よく言われていること"><a href="#よく言われていること" class="header-anchor">よく言われていること</a></h1>
<ul>
<li><p>使える人が少ない</p>
<ul>
<li><p>そうかも</p>
</li>
</ul>
</li>
<li><p>サクッとできる入門が欲しい?</p>
<ul>
<li><p>しょうがない作るか&#40;´・ω・｀&#41;</p>
</li>
<li><p>イマココ</p>
</li>
</ul>
</li>
</ul>
<hr />
<p>class: center, middle</p>
<h1 id="忙しい人のための_julia_入門環境構築"><a href="#忙しい人のための_julia_入門環境構築" class="header-anchor">忙しい人のための Julia 入門（環境構築）</a></h1>
<hr />
<h1 id="環境構築その"><a href="#環境構築その" class="header-anchor">環境構築&#40;その１&#41;</a></h1>
<ul>
<li><p>基本的には実行バイナリを落としてきてそこにパスを通せば良い.</p>
</li>
<li><p><a href="https://julialang.org/downloads/">公式ページのダウンロードページ</a></p>
<ul>
<li><p><code>Current stable release</code> のバージョンを選べば良い.</p>
</li>
<li><p><a href="https://julialang.org/downloads/platform/">Platform Specific Instructions for Official Binaries</a> に従う.</p>
</li>
</ul>
</li>
<li><p><a href="https://discourse.julialang.org/c/announce/25">リリースアナウンス</a> </p>
</li>
</ul>
<p>が出たらマイナーバージョンをアップデートすれば良い.</p>
<ul>
<li><p>1.8 が出たら 1.7 はメンテされないので捨てる.</p>
</li>
<li><p>1.9 が出たら 1.8 を捨てて 1.9 を使う</p>
</li>
<li><p>欠点: わざわざ差し替えるのがめんどい</p>
</li>
<li><p>いろんな方法を紹介してるので使いやすいものを選ぶこと</p>
</li>
</ul>
<hr />
<h1 id="環境構築その__2"><a href="#環境構築その__2" class="header-anchor">環境構築&#40;その１&#41;</a></h1>
<p>お手元に Python があれば <code>jill</code> インストーラを利用できる</p>
<pre><code class="console hljs"><span class="hljs-meta">$ </span><span class="language-bash">pip3 install jill</span>
<span class="hljs-meta">$ </span><span class="language-bash">jill install 1.7</span>
JILL - Julia Installer 4 Linux (MacOS, Windows and FreeBSD) -- Light

jill will:
  1) install Julia 1.7 for mac-x86_64 into /Applications
  2) make symlinks in ~/.local/bin
You may need to manually add /Users/terasaki/.local/bin to PATH
Continue installation? [Y/n]</code></pre>
<p><code>Y</code> を押してインストールする. <code>~/.local/bin</code> に PATH が通っていれば Julia が使える</p>
<pre><code class="console hljs"><span class="hljs-meta">$ </span><span class="language-bash">julia --version</span>
julia version 1.7.2</code></pre>
<hr />
<h1 id="環境構築その__3"><a href="#環境構築その__3" class="header-anchor">環境構築&#40;その１&#41;</a></h1>
<ul>
<li><p>主にWindowsユーザー向け</p>
</li>
<li><p>Windows ユーザーであれば Microsoft Store から <code>julia</code> と検索して入手できる. パスが通るところにインストールしてくれる. <a href="https://github.com/JuliaLang/juliaup">juliaup</a> というコマンドもついてくる. このコマンドで適宜最新版を入手できるようになる.</p>
</li>
</ul>
<hr />
<h1 id="環境構築その__4"><a href="#環境構築その__4" class="header-anchor">環境構築&#40;その１&#41;</a></h1>
<ul>
<li><p>Docker公式イメージを使う</p>
</li>
</ul>
<pre><code class="console hljs"><span class="hljs-meta">$ </span><span class="language-bash">docker run --<span class="hljs-built_in">rm</span> -it julia:1.7.2</span>
               _
   _       _ _(_)_     |  Documentation: https://docs.julialang.org
  (_)     | (_) (_)    |
   _ _   _| |_  __ _   |  Type &quot;?&quot; for help, &quot;]?&quot; for Pkg help.
  | | | | | | |/ _` |  |
  | | |_| | | | (_| |  |  Version 1.7.2 (2022-02-06)
 _/ |\__&#x27;_|_|_|\__&#x27;_|  |  Official https://julialang.org/ release
|__/                   |
<span class="hljs-meta">
julia&gt;</span></code></pre>
<hr />
<h1 id="環境構築その__5"><a href="#環境構築その__5" class="header-anchor">環境構築&#40;その１&#41;</a></h1>
<p>クラウド環境でも試せる</p>
<ul>
<li><p><a href="https://github.com/binder-examples/demo-julia">binder-examples/demo-julia</a></p>
<ul>
<li><p>リンク先にある <code>launch binder</code> ボタンを押す</p>
</li>
</ul>
</li>
<li><p><a href="https://studiolab.sagemaker.aws/">Amazon SageMaker Studio Lab</a></p>
</li>
</ul>
<hr />
<p>class: center, middle</p>
<h1 id="repl_で遊ぼう"><a href="#repl_で遊ぼう" class="header-anchor">REPL で遊ぼう</a></h1>
<p>文法も添えて</p>
<hr />
<p><code>julia</code> というコマンドが使えるようになったはず. REPL が立ち上がる.</p>
<pre><code class="julia hljs">_
   _       _ _(_)_     |  Documentation: https://docs.julialang.org
  (_)     | (_) (_)    |
   _ _   _| |_  __ _   |  <span class="hljs-built_in">Type</span> <span class="hljs-string">&quot;?&quot;</span> <span class="hljs-keyword">for</span> help, <span class="hljs-string">&quot;]?&quot;</span> <span class="hljs-keyword">for</span> Pkg help.
  | | | | | | |/ _<span class="hljs-string">` |  |
  | | |_| | | | (_| |  |  Version 1.7.2 (2022-02-06)
 _/ |\__&#x27;_|_|_|\__&#x27;_|  |  Official https://julialang.org/ release
|__/                   |

julia&gt; 1+1
2

julia&gt; println(&quot;Hello&quot;)
Hello

julia&gt; VERSION
v&quot;1.7.2&quot;

julia&gt; versioninfo()
Julia Version 1.7.2
Commit bf53498635 (2022-02-06 15:21 UTC)
Platform Info:
  OS: Linux (x86_64-pc-linux-gnu)
  CPU: Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz
  WORD_SIZE: 64
  LIBM: libopenlibm
  LLVM: libLLVM-12.0.1 (ORCJIT, skylake)
Environment:
  JULIA_PATH = /usr/local/julia
  JULIA_GPG = 3673DF529D9049477F76B37566E3C7DC03D6E495
  JULIA_VERSION = 1.7.2</span></code></pre>
<hr />
<h1 id="tips"><a href="#tips" class="header-anchor">Tips</a></h1>
<p><code>julia&gt;</code> の部分がプロンプトと呼ばれる. <code>julia&gt;</code> の部分も含めてコピペしても REPL 側がいい感じに処理してくれる. 下記のブロックを丸ごとコピーしてみると適切な出力を出すはずだ.</p>
<pre><code class="julia hljs">julia&gt; <span class="hljs-number">1</span> == <span class="hljs-number">2</span>
<span class="hljs-literal">true</span> <span class="hljs-comment"># 実際は false なので実際に動かすと false になる</span>

julia&gt; println(<span class="hljs-string">&quot;Hello&quot;</span>)
World <span class="hljs-comment"># 実際は Hello が出るはず</span></code></pre>
<p>Python と異なりインデントに関してセンシティブではないのでコードを適当にコピペして自由に実行させることができる.</p>
<hr />
<h1 id="unicode_文字列"><a href="#unicode_文字列" class="header-anchor">Unicode 文字列</a></h1>
<ul>
<li><p>Julia の良さは数学的な概念を表現しやすい</p>
<ul>
<li><p>Unicode 入力支援のおかげで論文や教科書に出てくる <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mo separator="true">,</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msup><mi>A</mi><mi>a</mi></msup><mo separator="true">,</mo><mi>π</mi><mo separator="true">,</mo><mo>⊗</mo></mrow><annotation encoding="application/x-tex">\beta, \hat{y}, x_1, A^a, \pi, \otimes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">⊗</span></span></span></span> をそっくりそのままかける.</p>
</li>
<li><p><code>julia&gt; β, ŷ, x₁, Aᵃ, π, ⊗</code></p>
</li>
</ul>
</li>
</ul>
<pre><code class="julia hljs">julia&gt; β <span class="hljs-comment"># \beta + &lt;tab&gt;</span>
julia&gt; ŷ <span class="hljs-comment"># y\hat + &lt;tab&gt;</span>
julia&gt; x₁ <span class="hljs-comment"># x\_1 + &lt;tab&gt;</span>
julia&gt; Aᵃ <span class="hljs-comment"># A\^a + &lt;tab&gt;</span>
julia&gt; <span class="hljs-literal">π</span> <span class="hljs-comment"># \pi + &lt;tab&gt; これは円周率を表す. `pi` でも良い</span>
julia&gt; ⊗ <span class="hljs-comment"># \otimes + &lt;tab&gt;</span></code></pre>
<hr />
<h1 id="julia_is_fast"><a href="#julia_is_fast" class="header-anchor">Julia is fast&#40;?&#41;</a></h1>
<pre><code class="julia hljs">julia&gt; <span class="hljs-keyword">function</span> mygcd(a, b)
           <span class="hljs-keyword">while</span> b != <span class="hljs-number">0</span>
               tmp = b; b = a % b; a = tmp
           <span class="hljs-keyword">end</span>
           <span class="hljs-keyword">return</span> a
       <span class="hljs-keyword">end</span>
mygcd (generic <span class="hljs-keyword">function</span> with <span class="hljs-number">1</span> method)

julia&gt; <span class="hljs-keyword">function</span> calcπ(N)
           cnt = <span class="hljs-number">0</span>
           <span class="hljs-keyword">for</span> a ∈ <span class="hljs-number">1</span>:N <span class="hljs-comment"># ∈ は \in + &lt;tab&gt; `in` でも良い</span>
               <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>:N <span class="hljs-comment"># in の代わりに `=` と書いても良い</span>
                   <span class="hljs-keyword">if</span> mygcd(a, b) == <span class="hljs-number">1</span>
                       cnt += <span class="hljs-number">1</span>
                   <span class="hljs-keyword">end</span>
               <span class="hljs-keyword">end</span>
           <span class="hljs-keyword">end</span>
           prob = cnt / N / N
           <span class="hljs-keyword">return</span> √(<span class="hljs-number">6</span>/prob) <span class="hljs-comment"># √ は \sqrt + &lt;tab&gt;</span>
       <span class="hljs-keyword">end</span>
calcπ (generic <span class="hljs-keyword">function</span> with <span class="hljs-number">1</span> method)

julia&gt; <span class="hljs-meta">@time</span> calcπ(<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)

  <span class="hljs-number">4.980897</span> seconds
<span class="hljs-number">3.141534239016629</span></code></pre>
<hr />
<pre><code class="c hljs"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;math.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">mygcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>{
    <span class="hljs-type">int</span> tmp;
    <span class="hljs-keyword">while</span> (b != <span class="hljs-number">0</span>) {
        tmp = b; b = a % b; a = tmp;
    }
    <span class="hljs-keyword">return</span> a;
}

<span class="hljs-type">double</span> <span class="hljs-title function_">calcpi</span><span class="hljs-params">(<span class="hljs-type">int</span> N)</span>{
    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> a=<span class="hljs-number">1</span>; a&lt;=N; a++){
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> b=<span class="hljs-number">1</span>; b&lt;=N; b++){
            <span class="hljs-keyword">if</span> (mygcd(a, b)==<span class="hljs-number">1</span>){
                cnt++;
            }
        }
    }
    <span class="hljs-type">double</span> prob = (<span class="hljs-type">double</span>)cnt / N / N;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(<span class="hljs-number">6</span>/prob);
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
    <span class="hljs-type">double</span> approx = calcpi(<span class="hljs-number">10000</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.15f\n&quot;</span>, approx);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
<pre><code class="console hljs"><span class="hljs-meta">$ </span><span class="language-bash">gcc -O2 calcpi.c &amp;&amp; time ./a.out</span>
3.141534239016629
./a.out  4.60s user 0.01s system 95% cpu 4.839 total</code></pre>
<hr />
<pre><code class="python hljs"><span class="hljs-keyword">import</span> math
<span class="hljs-keyword">import</span> time


<span class="hljs-keyword">def</span> <span class="hljs-title function_">mygcd</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-keyword">while</span> (b != <span class="hljs-number">0</span>):
        tmp = b
        b = a % b
        a = tmp
    <span class="hljs-keyword">return</span> a


<span class="hljs-keyword">def</span> <span class="hljs-title function_">calcpi</span>(<span class="hljs-params">N</span>):
    cnt = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):
        <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):
            <span class="hljs-keyword">if</span> mygcd(a, b) == <span class="hljs-number">1</span>:
                cnt += <span class="hljs-number">1</span>
    prob = cnt / N / N
    <span class="hljs-keyword">return</span> math.sqrt(<span class="hljs-number">6</span> / prob)


<span class="hljs-built_in">print</span>(calcpi(<span class="hljs-number">10000</span>))</code></pre>
<pre><code class="console hljs"><span class="hljs-meta">$ </span><span class="language-bash">time python calcpi.py</span>
3.141534239016629
python calcpi.py  47.90s user 0.21s system 99% cpu 48.265 total</code></pre>
<hr />
<h1 id="julia_is_fast__2"><a href="#julia_is_fast__2" class="header-anchor">Julia is fast&#40;?&#41;</a></h1>
<pre><code class="julia hljs">julia&gt; <span class="hljs-keyword">function</span> calcπ(N)
           cnt = <span class="hljs-number">0</span>
           <span class="hljs-keyword">for</span> a ∈ <span class="hljs-number">1</span>:N <span class="hljs-comment"># ∈ は \in + &lt;tab&gt; `in` でも良い</span>
               <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>:N <span class="hljs-comment"># in の代わりに `=` と書いても良い</span>
                   <span class="hljs-keyword">if</span> gcd(a, b) == <span class="hljs-number">1</span> <span class="hljs-comment"># Julia 標準の gcd は実は速い</span>
                       cnt += <span class="hljs-number">1</span>
                   <span class="hljs-keyword">end</span>
               <span class="hljs-keyword">end</span>
           <span class="hljs-keyword">end</span>
           prob = cnt / N / N
           <span class="hljs-keyword">return</span> √(<span class="hljs-number">6</span>/prob) <span class="hljs-comment"># √ は \sqrt + &lt;tab&gt;</span>
       <span class="hljs-keyword">end</span>
calcπ (generic <span class="hljs-keyword">function</span> with <span class="hljs-number">1</span> method)

julia&gt; <span class="hljs-meta">@time</span> calcπ(<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)
  <span class="hljs-number">2.277574</span> seconds
<span class="hljs-number">3.141534239016629</span></code></pre>
<p>Julia の gcd は <a href="https://github.com/JuliaLang/julia/blob/bf534986350a991e4a1b29126de0342ffd76205e/base/intfuncs.jl#L50-L71">binary GCD &#40;aka Stein&#39;s&#41; algorithm</a> を採用している.</p>
<p><a href="https://github.com/JuliaLang/julia/blob/bf534986350a991e4a1b29126de0342ffd76205e/base/intfuncs.jl#L41-L48">mygcd はここを参考にした</a></p>
<hr />
<h1 id="julia_はもう少しスマートにかける"><a href="#julia_はもう少しスマートにかける" class="header-anchor">Julia はもう少しスマートにかける</a></h1>
<pre><code class="julia hljs">julia&gt; <span class="hljs-keyword">function</span> calcπ(N)
           cnt = <span class="hljs-number">0</span>
           <span class="hljs-keyword">for</span> a = <span class="hljs-number">1</span>:N, b = <span class="hljs-number">1</span>:N
               cnt += ifelse(gcd(a, b) == <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)
           <span class="hljs-keyword">end</span>
           prob = cnt / N / N
           <span class="hljs-comment"># 実は return は不要. 最後に評価した式の値を返す.</span>
           √(<span class="hljs-number">6</span> / prob) <span class="hljs-comment"># √ は \sqrt + &lt;tab&gt;</span>
       <span class="hljs-keyword">end</span>
calcπ (generic <span class="hljs-keyword">function</span> with <span class="hljs-number">1</span> method)

julia&gt; <span class="hljs-meta">@time</span> calcπ(<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)

  <span class="hljs-number">2.338910</span> seconds
<span class="hljs-number">3.141534239016629</span>

julia&gt; <span class="hljs-meta">@time</span> calcπ(<span class="hljs-number">5</span>*<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)
 <span class="hljs-number">67.926152</span> seconds
<span class="hljs-number">3.141560849524047</span></code></pre>
<hr />
<h1 id="multi-threading"><a href="#multi-threading" class="header-anchor">Multi-Threading</a></h1>
<pre><code class="julia hljs"><span class="hljs-comment"># calcpi_thread.jl</span>
<span class="hljs-keyword">using</span> Base.Threads

<span class="hljs-keyword">function</span> calcπ(N)
    cnt = Atomic{<span class="hljs-built_in">Int</span>}(<span class="hljs-number">0</span>)
    Threads.<span class="hljs-meta">@threads</span> <span class="hljs-keyword">for</span> a = <span class="hljs-number">1</span>:N
        <span class="hljs-keyword">for</span> b = <span class="hljs-number">1</span>:N
            Threads.atomic_add!(cnt, ifelse(gcd(a, b) == <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>))
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    prob = cnt.value / N / N
    <span class="hljs-comment"># 実は return は不要. 最後に評価した式の値を返す.</span>
    √(<span class="hljs-number">6</span> / prob) <span class="hljs-comment"># √ は \sqrt + &lt;tab&gt;</span>
<span class="hljs-keyword">end</span>

<span class="hljs-meta">@time</span> <span class="hljs-meta">@show</span> calcπ(<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)
<span class="hljs-meta">@time</span> <span class="hljs-meta">@show</span> calcπ(<span class="hljs-number">5</span>*<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)</code></pre>
<pre><code class="console hljs"><span class="hljs-meta">$ </span><span class="language-bash">julia -t auto calcpi_thread.jl</span>
calcπ(10 ^ 4) = 3.141534239016629
  1.453167 seconds (66.57 k allocations: 3.809 MiB, 2.61% compilation time)
calcπ(5 * 10 ^ 4) = 3.141560849524047
 44.661406 seconds (101 allocations: 8.141 KiB)</code></pre>
<hr />
<h1 id="multi-processing"><a href="#multi-processing" class="header-anchor">Multi-Processing</a></h1>
<pre><code class="julia hljs"><span class="hljs-comment"># calcpi_distributed.jl</span>
<span class="hljs-keyword">using</span> Distributed

<span class="hljs-keyword">function</span> calcπ(N)
    cnt = <span class="hljs-meta">@distributed</span> (+) <span class="hljs-keyword">for</span> a = <span class="hljs-number">1</span>:N
        s = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> b = <span class="hljs-number">1</span>:N
            s += ifelse(gcd(a, b) == <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)
        <span class="hljs-keyword">end</span>
        s
    <span class="hljs-keyword">end</span>
    prob = cnt / N / N
    √(<span class="hljs-number">6</span> / prob)
<span class="hljs-keyword">end</span>

<span class="hljs-meta">@time</span> calcπ(<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)
<span class="hljs-meta">@time</span> calcπ(<span class="hljs-number">5</span>*<span class="hljs-number">10</span>^<span class="hljs-number">4</span>)</code></pre>
<pre><code class="console hljs">julia -p auto calcpi_distributed.jl
  2.389998 seconds (1.17 M allocations: 63.687 MiB, 0.27% gc time, 20.13% compilation time)
  6.294771 seconds (2.39 k allocations: 101.531 KiB)</code></pre>
<div class="page-foot">
  <div class="copyright">
    &copy; SatoshiTerasaki. Last modified: 2022年2月16日 水曜日. Website built with 
    <a href="http://github.com/terasakisatoshi/MathSeminar.jl">MathSeminar.jl</a>
    <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->
  </main> <!-- end of id=main -->
  <script src="/MathSeminar.jl/libs/vela/metisMenu.min.js"></script>
  <script src="/MathSeminar.jl/libs/vela/slideout.min.js"></script>
  
    



  
  
    


  
</body>
</html>
