<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="/MathSeminar.jl/libs/katex/katex.min.css">
   
   <link rel="stylesheet" href="/MathSeminar.jl/libs/highlight/github.min.css">
   
  

  <link href="/MathSeminar.jl/css/franklin.css" rel="stylesheet">
  <link href="/MathSeminar.jl/css/vela.css" rel="stylesheet">
  <script src="/MathSeminar.jl/libs/vela/jquery.min.js"></script>
  <link rel="stylesheet" href="/MathSeminar.jl/css/theorem.css">
   <title>PlotlyJS Example3</title>  
  <!-- PLOTLY -->
   <script src="/MathSeminar.jl/libs/plotly/plotly.min.js"></script> 

  <title>Franklin Example | Vela</title>
</head>
<body>
  <div class="main-nav" id="menu">
    <div class="flex-container">
      <span class="sidebar-brand">
        <h3 style='font-size: 25px'>MathSeminar.jl</h3>
      </span>
    </div> <!-- class="flex-container" -->

    <nav class="sidebar-nav">
      <ul class="metismenu"  id="metismenu" >
        <li><a href="/MathSeminar.jl/index.html">Home</a></li>
        <li><a href="" class="has-arrow">Slide Show</a>
          <ul>
            <li><a href="/MathSeminar.jl/slideshow/remark/build/">Introduction to Remark.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/franklin/build">Introduction to Franklin.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/dash/build">Introduction to Dash.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/binarybuilder/build">Introduction to BinaryBuilder.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/myworkflow/build">Introduction to MyWorkflow.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/repl/build">Do something great in your REPL</a>
            <li><a href="/MathSeminar.jl/slideshow/intro2julia/build">Into2Julia</a>
            <li><a href="/MathSeminar.jl/slideshow/pycallchainrules/build">PyCallChainRules</a>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Programming</a>
          <ul>
            <li><a href="/MathSeminar.jl/programming/clang">C</a></li>
            <li><a href="/MathSeminar.jl/programming/rust">Rust</a></li>
            <li><a href="/MathSeminar.jl/programming/benchmark_part1"> Julia benchmark Part1 </a></li>
            <li><a href="/MathSeminar.jl/programming/benchmark_part2"> Julia benchmark Part2 </a></li>
            <li><a href="/MathSeminar.jl/programming/literatejl">Literate.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/sympy">SymPy.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/franklin">Franklin.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/weave">Weave.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/theoremcounter">Theorem Counter</a></li>
            <li><a href="/MathSeminar.jl/programming/images">Images.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/rcall">RCall.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/asciinema">asciinema</a></li>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Gallery</a>
          <ul>
            <li><a href="/MathSeminar.jl/gallery/animation/">Plots.jl animation</a></li>
            <li><a href="/MathSeminar.jl/gallery/curve/">Plots.jl curve</a></li>
            <li><a href="/MathSeminar.jl/gallery/gr/">GR.jl</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs1/">PlotlyJS.jl Part1</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs2/">PlotlyJS.jl Part2</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs3/">PlotlyJS.jl Part3</a></li>
            <li><a href="/MathSeminar.jl/gallery/jsxgraph_js/">JSXGraph (JS)</a></li>
            <li><a href="/MathSeminar.jl/gallery/jsxgraph_jl/">JSXGraph (Julia)</a></li>
            <li><a href="/MathSeminar.jl/gallery/wglmakie/">WGLMakie.jl</a></li>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Topics in Mathematics</a>
          <ul>
            <li><a href="/MathSeminar.jl/mathematics/linearalgebra/chapter0">Linear Algebra</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/dice">Dice</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/Chisq">Chisq Distributions</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/Law_of_Large_Numbers">Law_of_Large_Numbers</a></li>
            <li><a href="/MathSeminar.jl/mathematics/visualizations/triangular_function_addition_theorem">Triangular function addition theorem</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div> <!-- main nav menu -->

  <main id="panel">
    <div class="toggle-button hamburger hamburger--spin">
      <div class="hamburger-box">
        <div class="hamburger-inner"></div>
      </div>
    </div>
    <h1 class="page title">PlotlyJS Example3</h1>
    <hr>


<!-- Content appended here -->
<div class="franklin-content"><h1 id="using_api_via_plotsjl"><a href="#using_api_via_plotsjl" class="header-anchor">Using API via Plots.jl</a></h1></p>
<p>      
<ul>
<li><p>Here is an example for those who would like to call PlotlyJS API via Plots.jl.</p>
</li>
</ul>
<h2 id="passing_json_which_has_layout_and_data_object"><a href="#passing_json_which_has_layout_and_data_object" class="header-anchor">Passing JSON which has <code>layout</code> and <code>data</code> object</a></h2></p>
<p>    
<ul>
<li><p><a href="https://github.com/tlienart/Franklin.jl/blob/2b6423783b4675ab14da74e183545ef2377bdf94/src/manager/extras.jl">Franklin.fdplotly</a> function requires <code>json::String</code> object as an argument which should contain fields named <code>layout</code> and <code>data</code>. On the other hand, Plots.jl provides <code>plotly_layout</code> and <code>plotly_series</code> that build <code>layout</code> and <code>data</code> respectively. See <a href="https://github.com/JuliaPlots/Plots.jl/blob/master/src/backends/plotly.jl">here</a> to see more details.</p>
</li>
<li><p>Here is a short example of creating Plot object via Plots.jl.</p>
</li>
</ul>
<h3 id="example_1"><a href="#example_1" class="header-anchor">Example 1</a></h3>

<pre><code class="language-julia">using Plots
using JSON
plotlyjs&#40;&#41;

p&#61;plot&#40;rand&#40;15&#41;&#41;

fdplotly&#40;
    JSON.json&#40;&#40;
        layout &#61; Plots.plotly_layout&#40;p&#41;,
        data &#61; Plots.plotly_series&#40;p&#41;,
    &#41;&#41;; style &#61; &quot;width:300px;height:200x&quot;,
&#41;</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_iOSjXi.
<h3 id="example_2"><a href="#example_2" class="header-anchor">Example 2</a></h3>
<ul>
<li><p>More complicated example can be executed via the following script:</p>
</li>
</ul>
<pre><code class="language-julia">using Plots
plotlyjs&#40;&#41;

r &#61; 2.0
N &#61; 20

φ &#61; range&#40;0.0, 2π, length &#61; N&#41;
p &#61; plot&#40;&#41;
for θ in range&#40;0, 2π, length &#61; N&#41;
    x &#61; @. r * sin&#40;θ&#41; * cos&#40;φ&#41;
    y &#61; @. r * sin&#40;θ&#41; * sin&#40;φ&#41;
    z &#61; repeat&#40;&#91;r * cos&#40;θ&#41;&#93;, N&#41;
    scatter&#33;&#40;p, x, y, z, label &#61; false, color &#61; :blue&#41;
end

fdplotly&#40;JSON.json&#40;&#40;
    layout &#61; Plots.plotly_layout&#40;p&#41;,
    data &#61; Plots.plotly_series&#40;p&#41;,
&#41;&#41;; style &#61; &quot;width:400px;height:300x&quot;,
&#41;</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_283t8h.
<h2 id="using_custom_function"><a href="#using_custom_function" class="header-anchor">Using custom function</a></h2></p>
<p>    
<ul>
<li><p>There is another approach that creates our own <code>fdplotly</code> function which accepts <code>p::Plots.Plot</code> object.</p>
</li>
</ul>
<p>By using <code>Plots.js_body</code> function, we can mimic what <code>Franklin.fdplotly</code> does:</p>
<pre><code class="language-julia">using Random
function fdplotly&#40;p::Plots.Plot;
    id&#61;&quot;fdp&quot; * Random.randstring&#40;&#39;a&#39;:&#39;z&#39;, 3&#41;,
    style &#61; &quot;width:600px;height:350px&quot;&#41;::Nothing
    b &#61; Plots.js_body&#40;p, id&#41;
    return nothing
end</code></pre>
<pre><code class="plaintext code-output">UndefVarError: Plots not defined
</code></pre>
<pre><code class="language-julia">using Plots
plotlyjs&#40;&#41;
p &#61; plot&#40;rand&#40;10&#41;&#41;
fdplotly&#40;p; style &#61; &quot;width:400px;height:300x&quot;&#41;</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_PDofvj.
<pre><code class="language-julia">using Plots
plotlyjs&#40;&#41;

r &#61; 3.0
N &#61; 20

φ &#61; range&#40;0.0, 2π, length &#61; N&#41;
p &#61; plot&#40;&#41;
for θ in range&#40;0, 2π, length &#61; N&#41;
    x &#61; @. r * sin&#40;θ&#41; * cos&#40;φ&#41;
    y &#61; @. r * sin&#40;θ&#41; * sin&#40;φ&#41;
    z &#61; repeat&#40;&#91;r * cos&#40;θ&#41;&#93;, N&#41;
    scatter&#33;&#40;p, x, y, z, label &#61; false, color &#61; :green&#41;
end

fdplotly&#40;p; style &#61; &quot;width:400px;height:300x&quot;&#41;</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_jiUesg.
<h3 id="example_torus"><a href="#example_torus" class="header-anchor">Example: Torus</a></h3>
<pre><code class="language-julia">using Plots
plotlyjs&#40;&#41;

a&#61;3.

p &#61; plot3d&#40;&#41;
N &#61; 45
u &#61; range&#40;0,2π,length&#61;N&#41;
for t in range&#40;0,2π,length&#61;N&#41;
    x &#61; @. cos&#40;t&#41; * &#40;a &#43; cos&#40;u&#41;&#41;
    y &#61; @. sin&#40;t&#41; * &#40;a &#43; cos&#40;u&#41;&#41;
    z &#61; @. sin&#40;u&#41;
    plot3d&#33;&#40;p, x, y, z, color&#61;:blue, legend&#61;false&#41;
end

t&#61;range&#40;0,2π,length&#61;N&#41;
for u in range&#40;0,2π,length&#61;N&#41;
    x &#61; @. cos&#40;t&#41; * &#40;a &#43; cos&#40;u&#41;&#41;
    y &#61; @. sin&#40;t&#41; * &#40;a &#43; cos&#40;u&#41;&#41;
    z &#61; sin&#40;u&#41; * ones&#40;length&#40;x&#41;&#41;
    plot3d&#33;&#40;p, x, y, z, color&#61;:blue, legend&#61;false&#41;
end

fdplotly&#40;p&#41;</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_b7Yscj.
<div class="page-foot">
  <div class="copyright">
    &copy; SatoshiTerasaki. Last modified: 2022年3月13日 日曜日. Website built with 
    <a href="http://github.com/terasakisatoshi/MathSeminar.jl">MathSeminar.jl</a>
    <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->
  </main> <!-- end of id=main -->
  <script src="/MathSeminar.jl/libs/vela/metisMenu.min.js"></script>
  <script src="/MathSeminar.jl/libs/vela/slideout.min.js"></script>
  
    <script src="/MathSeminar.jl/libs/katex/katex.min.js"></script>
<script src="/MathSeminar.jl/libs/katex/auto-render.min.js"></script>
<script>renderMathInElement(document.body)</script>

  
  
    <script src="/MathSeminar.jl/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

  
</body>
</html>
