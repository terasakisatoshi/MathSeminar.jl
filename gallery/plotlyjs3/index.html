<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="/MathSeminar.jl/libs/katex/katex.min.css">
   
   <link rel="stylesheet" href="/MathSeminar.jl/libs/highlight/github.min.css">
   
  

  <link href="/MathSeminar.jl/css/franklin.css" rel="stylesheet">
  <link href="/MathSeminar.jl/css/vela.css" rel="stylesheet">
  <script src="/MathSeminar.jl/libs/vela/jquery.min.js"></script>
  <link rel="stylesheet" href="/MathSeminar.jl/css/theorem.css">
   <title>PlotlyJS Example3</title>  
  <!-- PLOTLY -->
   <script src="/MathSeminar.jl/libs/plotly/plotly.min.js"></script> 

  <title>Franklin Example | Vela</title>
</head>
<body>
  <div class="main-nav" id="menu">
    <div class="flex-container">
      <span class="sidebar-brand">
        <h3 style='font-size: 25px'>MathSeminar.jl</h3>
      </span>
    </div> <!-- class="flex-container" -->

    <nav class="sidebar-nav">
      <ul class="metismenu"  id="metismenu" >
        <li><a href="/MathSeminar.jl/index.html">Home</a></li>
        <li><a href="" class="has-arrow">Slide Show</a>
          <ul>
            <li><a href="/MathSeminar.jl/slideshow/remark/build/">Introduction to Remark.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/franklin/build">Introduction to Franklin.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/dash/build">Introduction to Dash.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/binarybuilder/build">Introduction to BinaryBuilder.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/myworkflow/build">Introduction to MyWorkflow.jl</a>
            <li><a href="/MathSeminar.jl/slideshow/repl/build">Do something great in your REPL</a>
            <li><a href="/MathSeminar.jl/slideshow/intro2julia/build">Into2Julia</a>
            <li><a href="/MathSeminar.jl/slideshow/pycallchainrules/build">PyCallChainRules</a>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Programming</a>
          <ul>
            <li><a href="/MathSeminar.jl/programming/clang">C</a></li>
            <li><a href="/MathSeminar.jl/programming/rust">Rust</a></li>
            <li><a href="/MathSeminar.jl/programming/benchmark_part1"> Julia benchmark Part1 </a></li>
            <li><a href="/MathSeminar.jl/programming/benchmark_part2"> Julia benchmark Part2 </a></li>
            <li><a href="/MathSeminar.jl/programming/literatejl">Literate.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/sympy">SymPy.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/franklin">Franklin.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/weave">Weave.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/theoremcounter">Theorem Counter</a></li>
            <li><a href="/MathSeminar.jl/programming/images">Images.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/rcall">RCall.jl</a></li>
            <li><a href="/MathSeminar.jl/programming/asciinema">asciinema</a></li>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Gallery</a>
          <ul>
            <li><a href="/MathSeminar.jl/gallery/animation/">Plots.jl animation</a></li>
            <li><a href="/MathSeminar.jl/gallery/curve/">Plots.jl curve</a></li>
            <li><a href="/MathSeminar.jl/gallery/gr/">GR.jl</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs1/">PlotlyJS.jl Part1</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs2/">PlotlyJS.jl Part2</a></li>
            <li><a href="/MathSeminar.jl/gallery/plotlyjs3/">PlotlyJS.jl Part3</a></li>
            <li><a href="/MathSeminar.jl/gallery/jsxgraph_js/">JSXGraph (JS)</a></li>
            <li><a href="/MathSeminar.jl/gallery/jsxgraph_jl/">JSXGraph (Julia)</a></li>
            <li><a href="/MathSeminar.jl/gallery/wglmakie/">WGLMakie.jl</a></li>
          </ul>
        </li>
        <li><a href="" class="has-arrow">Topics in Mathematics</a>
          <ul>
            <li><a href="/MathSeminar.jl/mathematics/linearalgebra/chapter0">Linear Algebra</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/dice">Dice</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/Chisq">Chisq Distributions</a></li>
            <li><a href="/MathSeminar.jl/mathematics/statistics/Law_of_Large_Numbers">Law_of_Large_Numbers</a></li>
            <li><a href="/MathSeminar.jl/mathematics/visualizations/triangular_function_addition_theorem">Triangular function addition theorem</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div> <!-- main nav menu -->

  <main id="panel">
    <div class="toggle-button hamburger hamburger--spin">
      <div class="hamburger-box">
        <div class="hamburger-inner"></div>
      </div>
    </div>
    <h1 class="page title">PlotlyJS Example3</h1>
    <hr>


<!-- Content appended here -->
<div class="franklin-content"><h1 id="using_api_via_plotsjl"><a href="#using_api_via_plotsjl" class="header-anchor">Using API via Plots.jl</a></h1></p>
<p>      
<ul>
<li><p>Here is an example for those who would like to call PlotlyJS API via Plots.jl.</p>
</li>
</ul>
<h2 id="passing_json_which_has_layout_and_data_object"><a href="#passing_json_which_has_layout_and_data_object" class="header-anchor">Passing JSON which has <code>layout</code> and <code>data</code> object</a></h2></p>
<p>    
<ul>
<li><p><a href="https://github.com/tlienart/Franklin.jl/blob/2b6423783b4675ab14da74e183545ef2377bdf94/src/manager/extras.jl">Franklin.fdplotly</a> function requires <code>json::String</code> object as an argument which should contain fields named <code>layout</code> and <code>data</code>. On the other hand, Plots.jl provides <code>plotly_layout</code> and <code>plotly_series</code> that build <code>layout</code> and <code>data</code> respectively. See <a href="https://github.com/JuliaPlots/Plots.jl/blob/master/src/backends/plotly.jl">here</a> to see more details.</p>
</li>
<li><p>Here is a short example of creating Plot object via Plots.jl.</p>
</li>
</ul>
<h3 id="example_1"><a href="#example_1" class="header-anchor">Example 1</a></h3>

<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Plots
<span class="hljs-keyword">using</span> JSON
plotlyjs()

p=plot(rand(<span class="hljs-number">15</span>))

fdplotly(
    JSON.json((
        layout = Plots.plotly_layout(p),
        data = Plots.plotly_series(p),
    )); style = <span class="hljs-string">&quot;width:300px;height:200x&quot;</span>,
)</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_dOixdi.
<h3 id="example_2"><a href="#example_2" class="header-anchor">Example 2</a></h3>
<ul>
<li><p>More complicated example can be executed via the following script:</p>
</li>
</ul>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Plots
plotlyjs()

r = <span class="hljs-number">2.0</span>
N = <span class="hljs-number">20</span>

φ = range(<span class="hljs-number">0.0</span>, <span class="hljs-number">2</span><span class="hljs-literal">π</span>, length = N)
p = plot()
<span class="hljs-keyword">for</span> θ <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, <span class="hljs-number">2</span><span class="hljs-literal">π</span>, length = N)
    x = @. r * sin(θ) * cos(φ)
    y = @. r * sin(θ) * sin(φ)
    z = repeat([r * cos(θ)], N)
    scatter!(p, x, y, z, label = <span class="hljs-literal">false</span>, color = :blue)
<span class="hljs-keyword">end</span>

fdplotly(JSON.json((
    layout = Plots.plotly_layout(p),
    data = Plots.plotly_series(p),
)); style = <span class="hljs-string">&quot;width:400px;height:300x&quot;</span>,
)</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_IEdvHf.
<h2 id="using_custom_function"><a href="#using_custom_function" class="header-anchor">Using custom function</a></h2></p>
<p>    
<ul>
<li><p>There is another approach that creates our own <code>fdplotly</code> function which accepts <code>p::Plots.Plot</code> object.</p>
</li>
</ul>
<p>By using <code>Plots.js_body</code> function, we can mimic what <code>Franklin.fdplotly</code> does:</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Random
<span class="hljs-keyword">function</span> fdplotly(p::Plots.Plot;
    id=<span class="hljs-string">&quot;fdp&quot;</span> * Random.randstring(<span class="hljs-string">&#x27;a&#x27;</span>:<span class="hljs-string">&#x27;z&#x27;</span>, <span class="hljs-number">3</span>),
    style = <span class="hljs-string">&quot;width:600px;height:350px&quot;</span>)::<span class="hljs-built_in">Nothing</span>
    b = Plots.js_body(p, id)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nothing</span>
<span class="hljs-keyword">end</span></code></pre>
<pre><code class="plaintext hljs">UndefVarError: Plots not defined
</code></pre>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Plots
plotlyjs()
p = plot(rand(<span class="hljs-number">10</span>))
fdplotly(p; style = <span class="hljs-string">&quot;width:400px;height:300x&quot;</span>)</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_oAqYog.
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Plots
plotlyjs()

r = <span class="hljs-number">3.0</span>
N = <span class="hljs-number">20</span>

φ = range(<span class="hljs-number">0.0</span>, <span class="hljs-number">2</span><span class="hljs-literal">π</span>, length = N)
p = plot()
<span class="hljs-keyword">for</span> θ <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, <span class="hljs-number">2</span><span class="hljs-literal">π</span>, length = N)
    x = @. r * sin(θ) * cos(φ)
    y = @. r * sin(θ) * sin(φ)
    z = repeat([r * cos(θ)], N)
    scatter!(p, x, y, z, label = <span class="hljs-literal">false</span>, color = :green)
<span class="hljs-keyword">end</span>

fdplotly(p; style = <span class="hljs-string">&quot;width:400px;height:300x&quot;</span>)</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_lQwd1e.
<h3 id="example_torus"><a href="#example_torus" class="header-anchor">Example: Torus</a></h3>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Plots
plotlyjs()

a=<span class="hljs-number">3.</span>

p = plot3d()
N = <span class="hljs-number">45</span>
u = range(<span class="hljs-number">0</span>,<span class="hljs-number">2</span><span class="hljs-literal">π</span>,length=N)
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">2</span><span class="hljs-literal">π</span>,length=N)
    x = @. cos(t) * (a + cos(u))
    y = @. sin(t) * (a + cos(u))
    z = @. sin(u)
    plot3d!(p, x, y, z, color=:blue, legend=<span class="hljs-literal">false</span>)
<span class="hljs-keyword">end</span>

t=range(<span class="hljs-number">0</span>,<span class="hljs-number">2</span><span class="hljs-literal">π</span>,length=N)
<span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">2</span><span class="hljs-literal">π</span>,length=N)
    x = @. cos(t) * (a + cos(u))
    y = @. sin(t) * (a + cos(u))
    z = sin(u) * ones(length(x))
    plot3d!(p, x, y, z, color=:blue, legend=<span class="hljs-literal">false</span>)
<span class="hljs-keyword">end</span>

fdplotly(p)</code></pre>
Failed to precompile Plots &#91;91a5bcdd-55d7-5caf-9e0b-520d859cae80&#93; to /root/.julia/compiled/v1.7/Plots/jl_1lL3Fg.
<div class="page-foot">
  <div class="copyright">
    &copy; SatoshiTerasaki. Last modified: 2022年5月25日 水曜日. Website built with 
    <a href="http://github.com/terasakisatoshi/MathSeminar.jl">MathSeminar.jl</a>
    <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->
  </main> <!-- end of id=main -->
  <script src="/MathSeminar.jl/libs/vela/metisMenu.min.js"></script>
  <script src="/MathSeminar.jl/libs/vela/slideout.min.js"></script>
  
    



  
  
    


  
</body>
</html>
